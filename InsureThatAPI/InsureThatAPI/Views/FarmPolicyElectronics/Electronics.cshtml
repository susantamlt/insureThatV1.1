@model InsureThatAPI.Models.FPElectronics
@{
    ViewBag.Title = "Electronics";
    Layout = "~/Views/Shared/_Layout.cshtml";
    List<SelectListItem> listsExcess = new List<SelectListItem>();
    listsExcess.Add(new SelectListItem { Value = "200", Text = "$200" });
    listsExcess.Add(new SelectListItem { Value = "500", Text = "$500" });
    listsExcess.Add(new SelectListItem { Value = "1000", Text = "$1,000" });
    listsExcess.Add(new SelectListItem { Value = "2000", Text = "$2,000" });
}

<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 policy-indiv-head">
    <h4><span>FARM PROTECTION POLICY</span> / ELECTRONICS</h4>
</div>
<div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 endorsmentview">
    <div class="col-lg-7 col-md-7 col-sm-7 col-xs-12 policy-full-head">
        <h2>ELECTRONICS</h2>
    </div>
    <div class="col-md-5 col-sm-5 col-xs-12 pull-right">
        <div class="pull-right">
            <button type="button" href="#savepolicy" role="button" data-target="#savepolicy" data-toggle="modal" class="button-3d nomargin savepolicyP tab-linker" id="savepolicyP" style="width:auto;border:none;background-color:#000000;color:#FFFFFF;margin-top:10px;line-height:22px;">Save Policy</button>
            <button type="button" href="#referralListModel" role="button" data-target="#referralListModel" data-toggle="modal" class="button-3d nomargin tab-linker" id="referralList" style="width:auto;border:none;background-color:#000000;color:#FFFFFF;margin-top:10px;line-height:22px;">Referral List</button>
            <button type="button" href="#premiumModel" role="button" data-target="#premiumModel" data-toggle="modal" class="button-3d nomargin tab-linker" id="premium" style="width:auto;border:none;background-color:#000000;color:#FFFFFF;margin-top:10px;line-height:22px;">Premium</button>
        </div>
    </div>
    <div id="savepolicy" class="modal" data-easein="fadeIn" tabindex="-1" role="dialog" aria-labelledby="savepolicy" aria-hidden="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="padding: 15px 26px 0px;">
                    <h3 class="pull-left">Save Policy</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        <img src="~/images/close-icon.png" />
                    </button>
                </div>
                <div class="modal-body">
                    <p>Do you wish to save your policy till now and continue later.</p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default no-border" data-dismiss="modal" aria-hidden="true"> Back </button>
                    <button class="btn btn-default no-border savepolicyP" data-dismiss="modal" aria-hidden="true"> Save </button>
                </div>
            </div>
        </div>
    </div>
    <div id="referralListModel" class="modal" data-easein="fadeIn" tabindex="-1" role="dialog" aria-labelledby="referralListModel" aria-hidden="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="pull-left">Referral List</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        <img src="~/images/close-icon.png" />
                    </button>
                </div>
                <div class="modal-body">
                    @if (Model.Referels != null && Model.Referels.Count() > 0)
                    {
                        for (int j = 0; j < Model.Referels.Count(); j++)
                        {
                            @Model.Referels[j]<br />
                        }
                    }
                    else
                    {
                        <p>No Referral List</p>
                    }
                    <p id="referralList-p"></p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default no-border" data-dismiss="modal" aria-hidden="true"> Back </button>
                </div>
            </div>
        </div>
    </div>
    <div id="premiumModel" class="modal" data-easein="fadeIn" tabindex="-1" role="dialog" aria-labelledby="premiumModel" aria-hidden="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="padding: 15px 26px 0px;">
                    <h3 class="pull-left">Premium Details</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        <img src="~/images/close-icon.png" />
                    </button>
                </div>
                <div class="modal-body">
                    <table class="table" style=" width: 100%; ">
                        <thead>
                            <tr>
                                <th class="space_left">Section Name</th>
                                <th class="space_left">Base</th>
                                <th class="space_left">FSL</th>
                                <th class="space_left">GST</th>
                                <th class="space_left">Stamp Duty</th>
                                <th class="space_right">Gross</th>
                            </tr>
                        </thead>
                        <tbody id="premiumModel-p-b">
                            <tr>
                                <td colspan="6">No Premium Details</td>
                            </tr>
                        </tbody>
                        <tfoot id="premiumModel-p-f">
                            <tr>
                                <td colspan="6">No Premium Details</td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default no-border" data-dismiss="modal" aria-hidden="true"> Back </button>
                </div>
            </div>
        </div>
    </div>
    <div class="clearfix"></div>
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 success" id="savepolicyresult"></div>
    @using (Ajax.BeginForm("Electronics", "FarmPolicyElectronics", new { cid = @ViewBag.cid }, new AjaxOptions()
    {
        HttpMethod = "POST"
    }, new { @id = "electronicsFP", @name = "electronicsFP" }))
    {
        @Html.AntiForgeryToken()
        @Html.HiddenFor(p => p.CustomerId, new { @id = "ciid" })
        @Html.HiddenFor(p => p.PcId, new { id = "pcidd" })
        <div class="col-lg-12 clearfix col-sm-12 col-xs-12 policy-full-head">
            <p>Electronic Breakdown <a href="#MachineryBreakdownModel" role="button" data-target="#MachineryBreakdownModel" data-toggle="modal">click here</a> for description of cover</p>
            <h5>Part A</h5>
        </div>
        <div id="MachineryBreakdownModel" class="modal" data-easein="fadeIn" tabindex="-1" role="dialog" aria-labelledby="MachineryBreakdownModel" aria-hidden="false">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="pull-left">Electronic Equipment</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            <img src="~/images/close-icon.png" />
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>our electronic equipment that is shown in the Certificate. It is covered while it is at any one Location or while in transit between any two Locations shown in the Certificate against accidental breakdown.</p>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-default no-border" data-dismiss="modal" aria-hidden="true"> Back </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix mb-md-30 mt-10 mb-20">
            <div class="col-md-6 col-sm-4 col-xs-12"><p>Locations covered</p></div>
            <div class="col-md-6 col-sm-8 col-xs-12"><div class="col-md-10 col-sm-10 col-xs-10"><input type="text" name="location" class="form-control form-border-bottom"></div><div class="col-md-2 col-sm-2 col-xs-2"></div></div>
        </div>
        <div class="clearfix mb-md-30 mt-10 mb-10" id="processTabs">
            <div class="col-md-12 table-8">
                <table class="table" style=" width: 100%; ">
                    <tbody>
                        <tr>
                            <th class="space_left">Type of unit</th>
                            <th class="space_left">Make and model</th>
                            <th class="space_left">Serial number</th>
                            <th class="space_left">Number of units</th>
                            <th class="space_left">Portable Items Option (def)</th>
                            <th class="space_left">Sum Insured per unit</th>
                            <th class="space_left">Total Sum Insured</th>
                            <th class="space_right">&nbsp;</th>
                        </tr>
                        <tr id="tname-tr-1">
                            <td class="no-border">
                                @Html.DropDownListFor(p => p.TypeOfUnitFPObj.TypeofUnit, @Model.TypeOfUnitFPObj.ElectronicsTypeofUnitList, "-- Select --", new { @class = "commondataselection form-control form-border-bottom description vlidationInsure", @id = "typeofunits1", @data_itid = "0", @data_eiid = @Model.TypeOfUnitFPObj.EiId })
                                @Html.HiddenFor(p => p.TypeOfUnitFPObj.EiId)
                            </td>
                            <td class="no-border">
                                @Html.TextBoxFor(p => p.MakeAndModelFPObj.MakeandModel, new { @class = "form-control form-border-bottom commondatatest vlidationInsure", @id = "makeandmodel1", @data_itid = "0", @data_regex = "AN", @data_eiid = @Model.MakeAndModelFPObj.EiId })
                                @Html.HiddenFor(p => p.MakeAndModelFPObj.EiId)
                            </td>
                            <td class="no-border">
                                @Html.TextBoxFor(p => p.SerialNumberFPObj.SerialNumber, new { @class = "form-control form-border-bottom commondatatest vlidationInsure", @id = "serialnumber1", @data_itid = "0", @data_regex = "N", @data_eiid = @Model.SerialNumberFPObj.EiId })
                                @Html.HiddenFor(p => p.SerialNumberFPObj.EiId)
                            </td>
                            <td class="no-border">
                                @Html.TextBoxFor(p => p.NoOfUnitsFPObj.NoOfUnits, new { @class = "form-control form-border-bottom commondatatest autocalculateFE vlidationInsure", @id = "NoofUnits1", @data_itid = "0", @data_regex = "N", @data_eiid = @Model.NoOfUnitsFPObj.EiId })
                                @Html.HiddenFor(p => p.NoOfUnitsFPObj.EiId)
                            </td>
                            <td class="no-border">
                                <div class="policy-loc-row">
                                    <input type="checkbox" name="PortableitemsObj.portableitems" id="portableitems1" class="vlidationInsure"><label for="checkbox1"><span><span></span></span></label>
                                </div>
                            </td>
                            <td class="no-border">
                                $@Html.TextBoxFor(p => p.SumInsuredPerUnitFPObj.SumInsuredPerUnit, new { @style = "display:inline-block;width:89%;", @class = "form-control form-border-bottom vlidationInsure commondatatestComma commondatatestPrice autocalculateFE", @id = "suminsured1", @data_itid = "0", @data_regex = "N", @data_eiid = @Model.SumInsuredPerUnitFPObj.EiId })
                                @Html.HiddenFor(p => p.SumInsuredPerUnitFPObj.EiId)
                            </td>
                            <td class="no-border">
                                $@Html.TextBoxFor(p => p.TotalSumInsuredFPObj.TotalSumInsured, new { @style = "display:inline-block;width:89%;", @class = "form-control form-border-bottom vlidationInsure commondatatestComma commondatatestPrice TotalcalculateFE", @id = "totalsuminsured1", @data_itid = "0", @data_regex = "N", @data_eiid = @Model.TotalSumInsuredFPObj.EiId })
                                @Html.HiddenFor(p => p.TotalSumInsuredFPObj.EiId)
                            </td>
                            <td class="no-border" id="tname-1"><a href="javascript:void(0)" onclick="tnameAdd(1)" class="button-3d">+</a></td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td class="no-border"><label id="TypeOfUnitFPObj.TypeofUnit-error" class="error" for="TypeOfUnitFPObj.TypeofUnit"></label></td>
                            <td class="no-border"><label id="MakeAndModelFPObj.MakeandModel-error" class="error" for="MakeAndModelFPObj.MakeandModel"></label></td>
                            <td class="no-border"><label id="SerialNumberFPObj.SerialNumber-error" class="error" for="SerialNumberFPObj.SerialNumber"></label></td>
                            <td class="no-border"><label id="NoOfUnitsFPObj.NoOfUnits-error" class="error" for="NoOfUnitsFPObj.NoOfUnits"></label></td>
                            <td class="no-border"><label id="PortableitemsObj.portableitems-error" class="error" for="PortableitemsObj.portableitems"></label></td>
                            <td class="no-border"><label id="SumInsuredPerUnitFPObj.SumInsuredPerUnit-error" class="error" for="SumInsuredPerUnitFPObj.SumInsuredPerUnit"></label></td>
                            <td class="no-border"><label id="TotalSumInsuredFPObj.TotalSumInsured-error" class="error" for="TotalSumInsuredFPObj.TotalSumInsured"></label></td>
                            <td class="no-border">&nbsp;</td>
                        </tr>
                        <tr>
                            <td colspan="6">Total Suminsured</td>
                            <td colspan="2">$<span style="display:inline-block;" id="totalsumInsuredELE"></span></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
        <div class="clearfix mb-md-30 mt-10 mb-10 ">
            <div class="col-md-6"><p>Please select <a href="#ExcesshomeBuildingModel" role="button" data-target="#ExcesshomeBuildingModel" data-toggle="modal">Excess</a></p></div>
            <div class="col-md-3">
                @Html.DropDownListFor(Model => Model.ExcessElectronicsFPObj.Excess, listsExcess, new { @class = "gray-bg-underline form-control form-border-bottom field-length-sm commondataselection vlidationInsure", @id = "excess", @data_eiid = @Model.ExcessElectronicsFPObj.EiId })
                @Html.HiddenFor(p => p.ExcessElectronicsFPObj.EiId)
                <label id="ExcessElectronicsFPObj.Excess-error" class="error" for="ExcessElectronicsFPObj.Excess"></label>
            </div>
            @*<div class="col-md-3">
                    <div class="policy-loc-row">
                        <input type="checkbox" name="ImposedelectronicsObj.Imposed" id="imposed"><label for="checkbox1"><span><span></span></span>Imposed</label>
                        <label id="ImposedelectronicsObj.Imposed-error" class="error" for="ImposedelectronicsObj.Imposed"></label>
                    </div>
                </div>*@
        </div>
        <div id="ExcesshomeBuildingModel" class="modal" data-easein="fadeIn" tabindex="-1" role="dialog" aria-labelledby="ExcesshomeBuildingModel" aria-hidden="false">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="pull-left">Excess</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            <img src="~/images/close-icon.png" />
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>When you make a claim, you pay the first part of the cost and we pay the rest. Your part is called the <b>excess</b>.  You can reduce the cost of your insurance by choosing a higher excess.</p>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-default no-border" data-dismiss="modal" aria-hidden="true"> Back </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix mb-md-30 mt-10 mb-10">
            <div class="col-lg-12 clearfix col-sm-12 col-xs-12 policy-full-head">
                <p><a href="#LossOfDataModel" role="button" data-target="#LossOfDataModel" data-toggle="modal">click here</a> for description of cover</p>
                <h5>Part B - Loss of data</h5>
            </div>
            <div id="LossOfDataModel" class="modal" data-easein="fadeIn" tabindex="-1" role="dialog" aria-labelledby="LossOfDataModel" aria-hidden="false">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="pull-left">Loss of data</h3>
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                <img src="~/images/close-icon.png" />
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>Your data that is stored on Your electronic equipment. It is covered against accidental loss or damage. The loss or damage must result from accidental breakdown that is covered under Part A Electronic Equipment of this section. We must have agreed to pay a claim for that breakdown or would have but for the application of an Excess</p>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-default no-border" data-dismiss="modal" aria-hidden="true"> Back </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6"><p>How much do you wish to cover for loss of data? </p></div>
            <div class="col-md-6">
                $@Html.TextBoxFor(p => p.CoverLossOfDataFPObj.CoverLossofData, new { @style = "width:95%; display:inline-block;", @class = "form-control form-border-bottom vlidationInsure commondatatestComma commondatatestPrice", @id = "coverlossdata", @data_regex = 'N', @data_eiid = @Model.CoverLossOfDataFPObj.EiId })
                @Html.HiddenFor(p => p.CoverLossOfDataFPObj.EiId)
                <label id="ImposedelectronicsObj.Imposed-error" class="error" for="ImposedelectronicsObj.Imposed"></label>
            </div>
        </div>
        <div class="clearfix mb-md-30 mt-10 mb-10 ">
            <div class="col-md-6"><p>Please select <a href="#ExcesshomeBuildingModel" role="button" data-target="#ExcesshomeBuildingModel" data-toggle="modal">Excess</a> for electronics</p></div>
            <div class="col-md-3">
                @Html.DropDownListFor(p => p.ExcessCoverLossOfDataFPObj.Excess, listsExcess, new { @class = "gray-bg-underline form-control form-border-bottom field-length-sm commondataselection vlidationInsure", @id = "excesslossdata", @data_eiid = @Model.ExcessCoverLossOfDataFPObj.EiId })
                @Html.HiddenFor(p => p.ExcessCoverLossOfDataFPObj.EiId)
                <label id="CoverLossOfDataFPObj.CoverLossofData-error" class="error" for="CoverLossOfDataFPObj.CoverLossofData"></label>
            </div>
            @*<div class="col-md-3">
                    <div class="policy-loc-row">
                        <input type="checkbox" name="ImposedlossofdataObj.Imposed" id="imposed"><label for="checkbox1"><span><span></span></span>Imposed</label>
                        <label id="ImposedlossofdataObj.Imposed-error" class="error" for="ImposedlossofdataObj.Imposed"></label>
                    </div>
                </div>*@
        </div>
        <div class="mt-40">
            <div class="col-md-8"></div>
            <div class="col-md-4 pull-right text-right">
                <button class="button-3d nomargin tab-linker quot-next-btn" id="ptabbtnE">Save & Continue</button>
            </div>
        </div>
    }
</div>
<div class="col-lg-3 col-md-3 col-sm-3 col-xs-12 policy-side-wrap">
    <h3>Policy Sections</h3>
    <div class="well">
        <h3 style="font-size: 11px;margin-bottom: 2px;">Edit or delete previous sections here</h3>
        @if (Model.PolicyInclusion != null && Model.PolicyInclusion.Count() > 0)
        {
            for (int i = 0; i < Model.PolicyInclusion.Count(); i++)
            {
                <div class="policy-loc-row">
                    @Html.RadioButtonFor(m => m.SelectedInclusion, @Model.PolicyInclusion[i].Name, new { @class = "inclusions", @data_name = @Model.PolicyInclusion[i].Name, @data_nid = @i })<label for="radio1"><span><span></span></span>@Model.PolicyInclusion[i].Name</label>
                    <script type="text/javascript">
                        $(document).ready(function () {
                            $('.inclusions').click(function () {
                                var name = $(this).attr('data-name');
                                var nid = $(this).attr('data-nid');
                                $('.policy-ed-del-wrapper').hide();
                                $("#policy-ed-del-wrap-" + nid).show();

                            });
                        });
                    </script>
                    <div id="policy-ed-del-wrap-@i" class="policy-ed-del-wrapper" data style="display: none;">
                        <a class="btn color-bk-btn policy-edit-wrap" data-pcid="@Model.PcId" data-policystatus="@Model.PolicyStatus" data-name="@Model.PolicyInclusion[i].Name" data-cid="@Model.CustomerId" data-unid="@Model.PolicyInclusion[i].UnId" data-profileid="@Model.PolicyInclusion[i].ProfileUnId" href="javascript:void(0);">Edit</a>&nbsp;
                        <a class="btn color-bk-btn policy-delet-wrap" data-pcid="@Model.PcId" data-policystatus="@Model.PolicyStatus" data-name="@Model.PolicyInclusion[i].Name" data-cid="@Model.CustomerId" data-unid="@Model.PolicyInclusion[i].UnId" data-profileid="@Model.PolicyInclusion[i].ProfileUnId" href="javascript:void(0);">Delete</a>
                    </div>
                </div>
            }
            <script type="text/javascript">
                $(".policy-edit-wrap").click(function () {
                    var selectedname = $(this).data('name');
                    var selectedunid = $(this).data('unid');
                    var selectedprofileid = $(this).data('profileid');
                    var selectedcid = $(this).data('cid');
                    var selectedTrId = $(this).data('trid');
                    var PcId = $(this).data('pcid');
                    var policyStatus = $(this).data('policystatus');
                    // var prId = $(this).data('prId');
                    var prId = 1029;
                    $.ajax({
                        type: "POST",
                        url: "/Customer/EndorsePolicy",
                        data: {
                            "name": selectedname, "PcId": PcId, "cid": selectedcid, "trId": selectedTrId, "unid": selectedunid, "Profileid": selectedprofileid, "prId": prId, "policyStatus": policyStatus
                        },
                        success: function (responce) {
                            if (responce.Status == false) {
                                $(".error").css("color", "red").html("Failed to edit section, there is a problem in core system.").show().delay(100000).fadeOut();
                                $("html, body").animate({ scrollTop: 0 }, "slow");
                            } else {
                                window.location.href = responce;
                            }
                        }
                    });
                });
                $(".policy-delet-wrap").click(function () {
                    var r = confirm("Are you sure you want to delete this section?");
                    if (r == true) {
                        var PcId = $("#pcidd").val();
                        var selectedunid = $(this).data('unid');
                        var selectedcid = $(this).data('cid');
                        var PcId = $(this).data('pcid');
                        var selectedname = $(this).data('name');
                        var selectedprofileid = $(this).data('profileid');
                        var selectedTrId = $(this).data('trid');
                        var policyStatus = $(this).data('policystatus');
                        var currId = $(this).attr("id");
                        $.ajax({
                            type: "POST",
                            url: "/Customer/DeleteUnit",
                            data: { "unid": selectedunid, "cid": selectedcid, "pcid": PcId, "unit": selectedname, "profileid": selectedprofileid, "trid": selectedTrId, "policystatus": policyStatus },
                            success: function (responce) {
                                if (responce.Status == true) {
                                    var prentId = $('#' + currId).parent().parent().attr("id");
                                    $('#' + prentId).remove();
                                }
                            }
                        });
                    }
                });
                $("#bindcover").click(function () {
                    $.ajax({
                        type: "POST",
                        url: "/Customer/BindCover",
                        data: {},
                        success: function (responce) {
                        }
                    });
                });
            </script>
        }
        else
        {
            if (Model.PolicyInclusions != null && Model.PolicyInclusions.Count() > 0)
            {
                for (int i = 0; i < Model.PolicyInclusions.Count(); i++)
                {
                    <div class="policy-loc-row">
                        @Html.RadioButtonFor(m => m.SelectedInclusion, @i, new { @class = "inclusions", @disabled = "disabled", @data_name = @i, @data_nid = @i, @title = "Home Building should be filled first." })<label for="radio1"><span><span></span></span>@Model.PolicyInclusions[i].name</label>
                        <script type="text/javascript">
                            $(document).ready(function () {
                                $('.inclusions').click(function () {
                                    var name = $(this).attr('data-name');
                                    var nid = $(this).attr('data-nid');
                                    $('.policy-ed-del-wrapper').hide();
                                    $("#policy-ed-del-wrap-" + nid).show();

                                });
                            });
                        </script>
                        <div id="policy-ed-del-wrap-@i" class="policy-ed-del-wrapper" data style="display: none;">
                            <a class="btn color-bk-btn policy-edit-wrap" data-pcid="@Model.PcId" data-policystatus="@Model.PolicyStatus" data-name="@Model.PolicyInclusions[i].name" data-cid="@Model.CustomerId" data-unid="@Model.PolicyInclusions[i].UnitId" data-profileid="@Model.PolicyInclusions[i].ProfileId" href="javascript:void(0);">Edit</a>&nbsp;
                            <a class="btn color-bk-btn policy-delet-wrap" data-pcid="@Model.PcId" data-policystatus="@Model.PolicyStatus" data-name="@Model.PolicyInclusions[i].name" data-cid="@Model.CustomerId" data-unid="@Model.PolicyInclusions[i].UnitId" data-profileid="@Model.PolicyInclusions[i].ProfileId" href="javascript:void(0);">Delete</a>
                        </div>
                    </div>
                    <script type="text/javascript">
                        $(".policy-edit-wrap").click(function () {

                            var selectedname = $(this).data('name');
                            var selectedunid = $(this).data('unid');
                            var selectedprofileid = $(this).data('profileid');
                            var selectedcid = $(this).data('cid');
                            var selectedTrId = $(this).data('trid');
                            var PcId = $(this).data('pcid');
                            var policyStatus = $(this).data('policystatus');
                            // var prId = $(this).data('prId');
                            var prId = 1029;
                            $.ajax({
                                type: "POST",
                                url: "/Customer/EndorsePolicy",
                                data: {
                                    "name": selectedname, "PcId": PcId, "cid": selectedcid, "trId": selectedTrId, "unid": selectedunid, "Profileid": selectedprofileid, "prId": prId, "policyStatus": policyStatus, "calltype": 1
                                },
                                success: function (responce) {
                                    if (responce.Status == false) {
                                        $(".error").css("color", "red").html("Failed to edit section, there is a problem in core system.").show().delay(100000).fadeOut();
                                        $("html, body").animate({ scrollTop: 0 }, "slow");
                                    } else {
                                        window.location.href = responce;
                                    }
                                }
                            });
                        });
                        $(".policy-delet-wrap").click(function () {
                            var r = confirm("Are you sure you want to delete this section?");
                            if (r == true) {
                                var PcId = $("#pcidd").val();
                                var selectedunid = $(this).data('unid');
                                var selectedcid = $(this).data('cid');
                                var PcId = $(this).data('pcid');
                                var selectedname = $(this).data('name');
                                var selectedprofileid = $(this).data('profileid');
                                var selectedTrId = $(this).data('trid');
                                var policyStatus = $(this).data('policystatus');
                                var currId = $(this).attr("id");
                                $.ajax({
                                    type: "POST",
                                    url: "/Customer/DeleteUnit",
                                    data: { "unid": selectedunid, "cid": selectedcid, "pcid": PcId, "unit": selectedname, "profileid": selectedprofileid, "trid": selectedTrId, "policystatus": policyStatus },
                                    success: function (responce) {
                                        if (responce.Status == true) {
                                            var prentId = $('#' + currId).parent().parent().attr("id");
                                            $('#' + prentId).remove();
                                        }
                                    }
                                });
                            }
                        });
                    </script>
                }
            }

        }
        <div class="clearfix"></div>
        <div class="dropdown pc pc-in">
            <a class="new-cover-policy" href="#">New Section</a>
            <ul class="dropdown-menu col-md-12 unit">
                <li><a href="javascript:void(0);" class="Mobile Farm Property">+  Mobile Farm Property</a></li>
                <li><a href="javascript:void(0);" class="Farm Property">+  Farm Property</a></li>
                <li><a href="javascript:void(0);" class="Farm Interruption">+  Farm Interruption</a></li>
                <li><a href="javascript:void(0);" class="Farm Liability">+  Farm Liability</a></li>
                <li><a href="javascript:void(0);" class="Burglary">+  Burglary</a></li>
                <li><a href="javascript:void(0);" class="Money">+  Money</a></li>
                <li><a href="javascript:void(0);" class="Livestock">+  Livestock</a></li>
                <li><a href="javascript:void(0);" class="Liability">+  Liability</a></li>
                <li><a href="javascript:void(0);" class="Home Building">+  Home Building</a></li>
                <li><a href="javascript:void(0);" class="Home Content">+  Home Content</a></li>
                <li><a href="javascript:void(0);" class="Valuables">+  Valuables</a></li>
                <li><a href="javascript:void(0);" class="Transit">+  Transit</a></li>
                <li><a href="javascript:void(0);" class="Motors">+  Motors</a></li>
            </ul>
            <script type="text/javascript">
                $(document).on('click', 'ul.unit > li', function () {
                    var unitname = $(this).children("a").attr("class");
                    var cid = $("#ciid").val();
                    var pcid = $("#pcidd").val();
                    $.ajax({
                        type: "POST",
                        url: "/Customer/AddUnit",
                        data: { "unit": unitname, "cid": cid, "pcid": pcid },
                        success: function (responce) {
                            if (responce.Status == false) {
                                $(".error").css("color", "red").html("Failed to add section, there is a problem in core system.").show().delay(100000).fadeOut();
                                $("html, body").animate({ scrollTop: 0 }, "slow");
                            } else {
                                window.location.href = responce;
                            }
                        }
                    });
                });
            </script>
        </div>
    </div>
</div>
<script type="text/javascript">
    function tnameAdd(id) {
        var countId = id + 1;
        $('#tname-' + id + ' > a').css({ 'pointer-events': 'none', 'cursor': 'default' });
        var replaceA = '<a href="javascript:void(0)" onclick="tnameRemove(' + id + ')" class="button-3d">-</a>';
        var html = '<tr id="tname-tr-' + countId + '"><td class="no-border">@Html.DropDownListFor(Model => Model.TypeOfUnitFPObj.TypeofUnit, Enumerable.Empty<SelectListItem>(), new { @class = "commondataselection form-control form-border-bottom description  vlidationInsure", @id = "typeofunits", @data_itid = "" })@Html.HiddenFor(p => p.TypeOfUnitFPObj.EiId)</td><td class="no-border">@Html.TextBoxFor(p => p.MakeAndModelFPObj.MakeandModel, new { @class = "form-control form-border-bottom MakeAndModel commondatatest vlidationInsure", @id = "MakeAndModel", @data_itid = "", @data_regex = "AN" })@Html.HiddenFor(p => p.MakeAndModelFPObj.EiId)</td><td class="no-border">@Html.TextBoxFor(p => p.SerialNumberFPObj.SerialNumber, new { @class = "form-control form-border-bottom commondatatest vlidationInsure", @id = "serialnumber", @data_itid = "", @data_regex = "N" }) @Html.HiddenFor(p => p.SerialNumberFPObj.EiId)</td><td class="no-border">@Html.TextBoxFor(p => p.NoOfUnitsFPObj.NoOfUnits, new { @class = "form-control form-border-bottom commondatatest vlidationInsure autocalculateFE", @id = "NoofUnits", @data_itid = "", @data_regex = "N" }) @Html.HiddenFor(p => p.NoOfUnitsFPObj.EiId)</td><td class="no-border"><div class="policy-loc-row"><input type="checkbox" name="PortableitemsObj.portableitems" id="portableitems" class="vlidationInsure" data-itid=""><label for="checkbox1"><span><span></span></span></label></div></td><td class="no-border">$@Html.TextBoxFor(p => p.SumInsuredPerUnitFPObj.SumInsuredPerUnit, new { @style = "display:inline-block;width:89%;", @class = "form-control form-border-bottom vlidationInsure commondatatestComma commondatatestPrice autocalculateFE", @id = "suminsured", @data_itid = "", @data_regex = "N" }) @Html.HiddenFor(p => p.SumInsuredPerUnitFPObj.EiId)</td><td class="no-border">$@Html.TextBoxFor(p => p.TotalSumInsuredFPObj.TotalSumInsured, new { @style = "display:inline-block;width:89%;", @class = "form-control form-border-bottom vlidationInsure commondatatestComma commondatatestPrice TotalcalculateFE", @id = "totalsuminsured", @data_itid = "", @data_regex = "N" }) @Html.HiddenFor(p => p.TotalSumInsuredFPObj.EiId)</td><td class="no-border" id="tname-' + countId + '"><a href="javascript:void(0)" onclick="tnameAdd(' + countId + ')" class="button-3d">+</a></td></tr>';
        $.ajax({
            url: '/farm/farmajaxcontent',
            type: 'POST',
            data: { "id": countId, "content": "farmContents" },
            success: function (response) {
                if (response.status == true) {
                    var html1 = '';
                    $.each(response.des, function (i, v) {
                        html1 += '<option value="' + v.Value + '">' + v.Text + '</option>';
                    });
                    $("#tname-" + id).html(replaceA);
                    $("#tname-tr-" + id).after(html);
                    $("#tname-tr-" + countId + ' #typeofunits').html(html1);
                    $("#tname-tr-" + countId + " .form-control").attr("data-itid", id);
                    $("#tname-tr-" + countId + " .form-control").val('');
                    $("#tname-tr-" + countId + ' #typeofunits').attr('id', "typeofunits" + countId);
                    $("#tname-tr-" + countId + ' #makeandmodel').attr('id', "makeandmodel" + countId);
                    $("#tname-tr-" + countId + ' #serialnumber').attr('id', "serialnumber" + countId);
                    $("#tname-tr-" + countId + ' #NoofUnits').attr('id', "NoofUnits" + countId);
                    $("#tname-tr-" + countId + ' #portableitems').attr('id', "portableitems" + countId);
                    $("#tname-tr-" + countId + ' #suminsured').attr('id', "suminsured" + countId);
                    $("#tname-tr-" + countId + ' #totalsuminsured').attr('id', "totalsuminsured" + countId);
                } else {
                    $('#tname-' + id + ' > a').css({ 'pointer-events': '', 'cursor': '' });
                }
            }
        });
    }
    function tnameRemove(id) {
        $("#tname-tr-" + id).remove();
        var sumN = 0;
        $(".TotalcalculateFE").each(function () {
            var regex = /^[0-9]*$/;
            var iNum = $(this).attr('id');
            var val2 = $(this).val();
            var newval2 = val2.replace(/,/g, '');
            if (newval2 != '' && regex.test(newval2)) {
                sumN = parseInt(newval2) + sumN;
            }
        });
        var sumNT = commaReplace(sumN);
        $("#totalsumInsuredELE").text(sumNT);
    }
    $(document).ready(function () {
        var sumN = 0;
        $(".TotalcalculateFE").each(function () {
            var regex = /^[0-9]*$/;
            var val2 = $(this).val();
            var newval2 = val2.replace(/,/g, '');
            if (newval2 != '' && regex.test(newval2)) {
                sumN = parseInt(newval2) + sumN;
            }
        });
        var sumNT = commaReplace(sumN);
        $("#totalsumInsuredELE").text(sumNT);
    });
    $(document).on('focusout', '.autocalculateFE', function () {
        $(".autocalculateFE").each(function () {
            var regex = /^[0-9]*$/;
            var iNum = $(this).attr('id');
            var lastChar = iNum.substr(iNum.length - 1);
            var val1 = $('#NoofUnits' + lastChar).val();
            var newval1 = val1.replace(/,/g, '');
            var val2 = $('#suminsured' + lastChar).val();
            var newval2 = val2.replace(/,/g, '');
            if (newval1 != '' && regex.test(newval1) && newval2 != '' && regex.test(newval2)) {
                var sum = commaReplace(newval1 * newval2);
                $("#totalsuminsured" + lastChar).val(sum);
            }
        });
        var sumN = 0;
        $(".TotalcalculateFE").each(function () {
            var regex = /^[0-9]*$/;
            var val3 = $(this).val();
            var newval3 = val3.replace(/,/g, '');
            if (newval3 != '' && regex.test(newval3)) {
                sumN = parseInt(newval3) + sumN;
            }
        });
        var sumNT = commaReplace(sumN);
        $("#totalsumInsuredELE").text(sumNT);
    });
</script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#ptabbtnE").click(function (e) {
            e.preventDefault();
            var valid = 1;
            $(".vlidationInsure").each(function () {
                var id = $(this).attr('id');
                var nameAttr = $(this).attr('name');
                var lastChar = id.substr(id.length - 1);
                var newval = $(this).val();
                if (nameAttr == "location") {
                    var regex = /^[a-zA-Z0-9 ]*$/;
                    if (!regex.test(newval)) {
                        $('#' + id).css({ "border": "1px solid #ff0000" });
                        $("label[for='" + nameAttr + "']").text('Special character are not allowed').css({ "display": "block" });
                        valid = 0;
                    } else {
                        $('#' + id).css({ "border": "" });
                        $("label[for='" + nameAttr + "']").text("");
                    }
                }
                if (nameAttr == "MakeAndModelFPObj.MakeandModel") {
                    var regex = /^[a-zA-Z0-9 ]*$/;
                    if ($('#typeofunits' + lastChar).val() != '' && newval == '') {
                        $('#' + id).css({ "border": "1px solid #ff0000" });
                        $("label[for='" + nameAttr + "']").text('Please enter make & model').css({ "display": "block" });
                        valid = 0;
                    } else if ($('#typeofunits' + lastChar).val() != '' && !regex.test(newval)) {
                        $('#' + id).css({ "border": "1px solid #ff0000" });
                        $("label[for='" + nameAttr + "']").text('Special character are not allowed').css({ "display": "block" });
                        valid = 0;
                    } else {
                        $('#' + id).css({ "border": "" });
                        $("label[for='" + nameAttr + "']").text("");
                    }
                }
                if (nameAttr == "SerialNumberFPObj.SerialNumber") {
                    var regex = /^[0-9]*$/;
                    if ($('#typeofunits' + lastChar).val() != '' && newval == '') {
                        $('#' + id).css({ "border": "1px solid #ff0000" });
                        $("label[for='" + nameAttr + "']").text('Please enter serial number').css({ "display": "block" });
                        valid = 0;
                    } else if ($('#typeofunits' + lastChar).val() != '' && !regex.test(newval)) {
                        $('#' + id).css({ "border": "1px solid #ff0000" });
                        $("label[for='" + nameAttr + "']").text('Only numeric are allowed').css({ "display": "block" });
                        valid = 0;
                    } else {
                        $('#' + id).css({ "border": "" });
                        $("label[for='" + nameAttr + "']").text("");
                    }
                }
                if (nameAttr == "NoOfUnitsFPObj.NoOfUnits") {
                    var regex = /^[0-9]*$/;
                    if ($('#typeofunits' + lastChar).val() != '' && newval == '') {
                        $('#' + id).css({ "border": "1px solid #ff0000" });
                        $("label[for='" + nameAttr + "']").text('Please enter number of unit').css({ "display": "block" });
                        valid = 0;
                    } else if ($('#typeofunits' + lastChar).val() != '' && !regex.test(newval)) {
                        $('#' + id).css({ "border": "1px solid #ff0000" });
                        $("label[for='" + nameAttr + "']").text('Only numeric are allowed').css({ "display": "block" });
                        valid = 0;
                    } else {
                        $('#' + id).css({ "border": "" });
                        $("label[for='" + nameAttr + "']").text("");
                    }
                }
                if (nameAttr == "SumInsuredPerUnitFPObj.SumInsuredPerUnit") {
                    var regex = /^[0-9]*$/;
                    var newValValuablesS = newval.replace(/,/g, '');
                    if ($('#typeofunits' + lastChar).val() != '' && newValValuablesS == '') {
                        $('#' + id).css({ "border": "1px solid #ff0000" });
                        $("label[for='" + nameAttr + "']").text('Please enter sum insured per unit').css({ "display": "block" });
                        valid = 0;
                    } else if ($('#typeofunits' + lastChar).val() != '' && !regex.test(newValValuablesS)) {
                        $('#' + id).css({ "border": "1px solid #ff0000" });
                        $("label[for='" + nameAttr + "']").text('Only numeric are allowed').css({ "display": "block" });
                        valid = 0;
                    } else {
                        $('#' + id).css({ "border": "" });
                        $("label[for='" + nameAttr + "']").text("");
                    }
                }
                if (nameAttr == "TotalSumInsuredFPObj.TotalSumInsured") {
                    var regex = /^[0-9]*$/;
                    var newValValuablesS = newval.replace(/,/g, '');
                    if ($('#typeofunits' + lastChar).val() != '' && newValValuablesS == '') {
                        $('#' + id).css({ "border": "1px solid #ff0000" });
                        $("label[for='" + nameAttr + "']").text('Please enter total sum insured').css({ "display": "block" });
                        valid = 0;
                    } else if ($('#typeofunits' + lastChar).val() != '' && newValValuablesS!='' && !regex.test(newValValuablesS)) {
                        $('#' + id).css({ "border": "1px solid #ff0000" });
                        $("label[for='" + nameAttr + "']").text('Only numeric are allowed').css({ "display": "block" });
                        valid = 0;
                    } else {
                        $('#' + id).css({ "border": "" });
                        $("label[for='" + nameAttr + "']").text("");
                    }
                }
                if (nameAttr == "CoverLossOfDataFPObj.CoverLossofData") {
                    var regex = /^[0-9]*$/;
                    var newValValuablesS = newval.replace(/,/g, '');
                    if (newValValuablesS == '') {
                            $('#' + id).css({ "border": "1px solid #ff0000" });
                            $("label[for='" + nameAttr + "']").text('Please enter loss cover data').css({ "display": "block" });
                            valid = 0;
                    } else if (newValValuablesS != '' && !regex.test(newValValuablesS)) {
                            $('#' + id).css({ "border": "1px solid #ff0000" });
                            $("label[for='" + nameAttr + "']").text('Only numeric are allowed').css({ "display": "block" });
                            valid = 0;
                    } else {
                        $('#' + id).css({ "border": "" });
                        $("label[for='" + nameAttr + "']").text("");
                    }
                }
            });
            if (valid == 1) {
                $("form[name='electronicsFP']").submit();
            }
        });
    });
    $(document).on('focusout', ".commondatatest", function () {
        var Value = $(this).val();
        var EIId = $(this).data('eiid');
        var ItIdN = $(this).data('itid');
        var Nregex = $(this).data('regex');
        var name = $(this).attr('name');
        var id = $(this).attr('id');
        if (ItIdN == undefined || ItIdN == "") {
            var ItId = "0";
        } else {
            var ItId = ItIdN;
        }
        var regex = "";
        var text = "";
        if (Nregex == 'N') {
            regex = /^[0-9]*$/;
            text = "Only numeric are allowed";
        } else if (Nregex == 'A') {
            regex = /^[a-zA-Z ]*$/;
            text = "Special character & numeric are not allowed";
        } else if (Nregex == 'AN') {
            regex = /^[a-zA-Z0-9 ]*$/;
            text = "Special character are not allowed";
        } else if (Nregex == 'AS') {
            regex = /^[a-zA-Z/ ]*$/;
            text = "Numeric are not allowed";
        }
        if (!regex.test(Value)) {
            $('#' + id).css({ "border": "1px solid #ff0000" });
            $("label[for='" + name + "']").text(text).css({ "display": "block" });
        } else if (Value != "") {
            $('#' + id).css({ "border": "" });
            $("label[for='" + name + "']").text('').css({ "display": "none" });
            elementAjaxCall(Value, EIId, ItId);
        }
    });
    function elementAjaxCall(Value, EIId, ItId) {
        if (Value != '' && EIId != '') {
            $.ajax({
                url: '/Customer/ElementDetails',
                type: "POST",
                crossOrigin: true,
                data: { "PrId": "1021", "ElId": EIId, "Value": Value, "ItId": ItId },
                success: function (data) {
                    if (!$.isEmptyObject(data.valuedata) && data.valuedata.length > 0) {
                        var valuedata = data.valuedata;
                        if (valuedata != '' && valuedata != null) {
                            $.each(valuedata, function (index, value) {
                                var StateIdNewOne = $("[data-eiid=" + value.Element.ElId + "]").attr('id');
                                //$('#' + StateIdNewOne).val(value.Value);
                                if (!$.isEmptyObject(data.stateData) && data.stateData.length > 0) {
                                    var statedata = data.stateData;
                                    if (statedata != '' && statedata != null) {
                                        $.each(statedata, function (index1, value1) {
                                            var StateIdNew = $("[data-eiid=" + value1.Element.ElId + "]").attr('id');
                                            if (value1.Value == 'Invisible') {
                                                $('#' + StateIdNew).removeAttr('readonly');
                                                $('#' + StateIdNew).removeAttr('disabled');
                                                $('#' + StateIdNew).css({ 'text-decoration': '' });
                                                $('.cl-' + value1.Element.ElId).css({ 'display': 'none' });
                                                $('#' + StateIdNew).removeAttr('required', 'required');
                                            } else if (value1.Value == 'Disabled') {
                                                $('#' + StateIdNew).attr('disabled', 'disabled');
                                                $('#' + StateIdNew).removeAttr('readonly');
                                                $('#' + StateIdNew).css({ 'text-decoration': '' });
                                                $('.cl-' + value1.Element.ElId).css({ 'display': 'block' });
                                                $('#' + StateIdNew).removeAttr('required', 'required');
                                            } else if (value1.Value == 'Read Only') {
                                                $('#' + StateIdNew).attr('readonly', 'readonly');
                                                $('#' + StateIdNew).removeAttr('disabled');
                                                $('#' + StateIdNew).css({ 'text-decoration': '' });
                                                $('.cl-' + value1.Element.ElId).css({ 'display': 'block' });
                                                $('#' + StateIdNew).removeAttr('required', 'required');
                                            } else if (value1.Value == 'Strike Through') {
                                                $('#' + StateIdNew).css({ 'text-decoration': 'line-through' });
                                                $('#' + StateIdNew).removeAttr('readonly');
                                                $('#' + StateIdNew).removeAttr('disabled');
                                                $('.cl-' + value1.Element.ElId).css({ 'display': 'block' });
                                                $('#' + StateIdNew).removeAttr('required', 'required');
                                            } else if (value1.Value == 'Required') {
                                                $('#' + StateIdNew).css({ 'text-decoration': 'line-through' });
                                                $('#' + StateIdNew).removeAttr('readonly');
                                                $('#' + StateIdNew).removeAttr('disabled');
                                                $('.cl-' + value1.Element.ElId).css({ 'display': 'block' });
                                                $('#' + StateIdNew).attr('required', 'required');
                                            } else if (value1.Value == '"Not Rendered') {
                                                $('#' + StateIdNew).css({ 'text-decoration': '' });
                                                $('#' + StateIdNew).removeAttr('readonly');
                                                $('#' + StateIdNew).removeAttr('disabled');
                                                $('.cl-' + value1.Element.ElId).css({ 'display': 'block' });
                                                $('#' + StateIdNew).removeAttr('required', 'required');
                                            }
                                        });
                                    }
                                }
                            });
                        }
                    }
                    //if (data.referrallist != null || data.referrallist != "") {
                    //    $('#referralList-p').html('No Referral List');
                    //} else {
                    //    $('#referralList-p').html(data.referrallist);
                    //}
                    if (data.referrallists == "") {
                        $('#referralList-p').html('No Referral List');
                    } else {
                        $('#referralList-p').html(data.referrallists);
                    }
                    if (data.usermessage == "") {
                        var newIDforCurrentElement = $("[data-eiid=" + EIId + "]").attr('id');
                        var newIDforCurrentElementTypes = $("[data-eiid=" + EIId + "]").attr('type');
                        if (newIDforCurrentElementTypes == 'radio') {
                            var labelid = $('#' + newIDforCurrentElement).parent().parent().siblings('.error').attr("for");
                        } else if (newIDforCurrentElementTypes == 'checkbox') {
                            var labelid = $('#' + newIDforCurrentElement).parent().parent().siblings('.error').attr("for");
                        } else {
                            var labelid = $('#' + newIDforCurrentElement).siblings('.error').attr("for");
                        }
                        $("label[for='" + labelid + "']").html('');
                        $("label[for='" + labelid + "']").css({ "display": "none" });
                    } else {
                        var newIDforCurrentElement = $("[data-eiid=" + EIId + "]").attr('id');
                        var newIDforCurrentElementTypes = $("[data-eiid=" + EIId + "]").attr('type');
                        if (newIDforCurrentElementTypes == 'radio') {
                            var labelid = $('#' + newIDforCurrentElement).parent().parent().siblings('.error').attr("for");
                        } else if (newIDforCurrentElementTypes == 'checkbox') {
                            var labelid = $('#' + newIDforCurrentElement).parent().parent().siblings('.error').attr("for");
                        } else {
                            var labelid = $('#' + newIDforCurrentElement).siblings('.error').attr("for");
                        }
                        $("label[for='" + labelid + "']").html(data.usermessage);
                        $("label[for='" + labelid + "']").css({ "display": "block" });
                    }
                }
            });
        }
    }
    $(document).on('click', '.savepolicyP', function () {
        $.ajax({
            type: "POST",
            url: "/Customer/SavePolicy",
            data: { "PrId": 1021 },
            success: function (res) {
                if (res.status == true) {
                    var html = '<div class="alert alert-success"><strong>' + res.result + '</strong></div>';
                    $('#savepolicyresult').html(html);
                } else {
                    var html = '<div class="alert alert-danger"><strong>' + res.result + '</strong></div>';
                    $('#savepolicyresult').html('');
                }
            }
        });
    });
</script>