@model InsureThatAPI.Models.ValuablesHC
@{
    ViewBag.Title = "Valuables";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 policy-indiv-head">
    <h4><span>RURAL LIFESTYLE POLICY</span> / VALUABLES</h4>
</div>
<div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 endorsmentview">
    <div class="col-lg-8 col-md-8 col-sm-6 col-xs-12 policy-full-head">
        <h2>VALUABLES</h2>
    </div>
    <div class="clearfix"></div>
    <div id="errorContainer"></div>
    @using (Ajax.BeginForm("Valuables", "HomeContentValuable", new { cid = @ViewBag.cid }, new AjaxOptions()
    {
        HttpMethod = "POST"

    }, new { @id = "valuables", @name = "valuables" }))
    {
        @Html.AntiForgeryToken()
        <div class="col-md-12 mt-10 mb-10"><p><a href="#ShearingDelaysModal2" role="button" data-target="#ShearingDelaysModal2" data-toggle="modal">Click here to see the definition of Valuables?</a></p></div>
        <div class="col-md-12 mt-10 mb-10"><p><a href="#underCoverModal2" role="button" data-target="#underCoverModal2" data-toggle="modal">what is covered under this section?</a></p></div>
        <div class="col-md-12 mt-10 mb-10">
            @Html.HiddenFor(m => m.CustomerId)
            <div class="col-md-4"><p>Location</p></div>
            <div class="col-md-8">
                <input type="text" placeholder="Street/Road" name="postcode" id="postCode" class="form-control form-inline field-length-xs" />,
                @Html.DropDownListFor(model => model.SubUrb, Model.SubUrb, "-- Suburb --", new { @class = "form-control form-inline select2hd select2hdc", @id = "suburb", @name = "suburb" })               
                <select name="state" id="state" class="form-control form-inline select2hd">
                    <option value="">State</option>
                    <option value="1">Melborne</option>
                    <option value="2">Sydney</option>
                </select>,                
                Postcode <input type="text" placeholder="Post Code" name="postcode" id="postCode" class="form-control form-inline field-length-xs" />.
            </div>
        </div>
        <div class="col-md-12 mt-10 mb-10">
            <div class="col-md-4"><p>Cover For unspecified Valuables</p></div>
            <div class="col-md-3">@Html.TextBoxFor(p => p.UnspecificObj.Unspecific, new { @class = "gray-bg-underline", @id = "unspecific" })</div>
            <div class="col-md-5">@Html.HiddenFor(p => p.UnspecificObj.EiId)</div>
        </div>
        <div class="col-md-12 mt-10 mb-10">
            <div class="col-md-12 table-8">
                <table class="table" style="width:100%;">
                    <thead>
                        <tr>
                            <th class="space_left">Description</th>
                            <th class="space_left">Sum Insured</th>
                            <th class="space_right">&nbsp;</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr id="tname-tr-1">
                            <td>
                                @Html.TextBoxFor(p => p.DescriptionObj.Description, new { @class = "form-control form-inline field-length-lg no-border", @id = "description", @placeholder = "Engagement Ring", @style = "width:100%;" })
                                @Html.HiddenFor(p => p.DescriptionObj.EiId)
                            </td>
                            <td class="price stotal">
                                $ &nbsp;@Html.TextBoxFor(p => p.SuminsuredObj.Suminsured, new { @class = "form-control form-inline field-length-xs no-border sumoftotalcover", @id = "suminsured", @placeholder = "15000" })/-
                                @Html.HiddenFor(p => p.SuminsuredObj.EiId)
                            </td>
                            <td class="no-border" id="tname-1"><a href="javascript:void(0)" onclick="tnameAdd(1)" class="button-3d">+</a></td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td class="data_right text-right">Total Sum Insured</td>
                            <td class="price" id="tPrice">$ <span id="totalsuminsured">0</span>/-</td>
                            @Html.HiddenFor(p => p.TotalcoverObj.Totalcover, new { @id= "totalcover" })
                            @Html.HiddenFor(p => p.TotalcoverObj.EiId)
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
        <div class="mt-10 mb-10 col-md-12 ">
            <div class="col-md-6"><p>Please select the excess you wish to pay</p></div>
            <div class="col-md-3">
                @Html.DropDownListFor(Model => Model.ExcesspayObj.Excess, @Model.ExcesspayObj.ExcessList, "-- Select --", new { @class = "gray-bg-underline form-control form-border-bottom field-length-sm", @id = "excess" })
                @Html.HiddenFor(p => p.ExcesspayObj.EiId)
            </div>
        </div>
        <div id="ShearingDelaysModal2" class="modal" data-easein="fadeIn" tabindex="-1" role="dialog" aria-labelledby="ShearingDelaysModal2" aria-hidden="false">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="pull-left">Valuables</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            <img src="~/images/close-icon.png" />
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                        </p>
                        <p> Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-default no-border" data-dismiss="modal" aria-hidden="true"> Back </button>
                    </div>
                </div>
            </div>
        </div>
        <div id="underCoverModal2" class="modal" data-easein="fadeIn" tabindex="-1" role="dialog" aria-labelledby="underCoverModal2" aria-hidden="false">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="pull-left">Covered Under</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            <img src="~/images/close-icon.png" />
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                        </p>
                        <p> Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-default no-border" data-dismiss="modal" aria-hidden="true"> Back </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 pull-right text-right">
            <button type="submit" class="button-3d nomargin tab-linker quot-next-btn">Next</button>
        </div>
    }
</div>
<div class="col-lg-3 col-md-3 col-sm-3 col-xs-12 policy-side-wrap">
    <h3>Policy Sections</h3>
    <div class="well">
        <div class="policy-loc-row">
            <input type="radio" name="location1" id="location1" /><label for="radio1"><span><span></span></span>Home Building Location 1</label>
            <script type="text/javascript">
				$(document).ready(function() {
					$('#location1').click(function () {
						$("#policy-ed-del-wrap1").fadeIn('slow');
						$("#policy-ed-del-wrap2").fadeOut('slow');
					});
				});
            </script>
            <div id="policy-ed-del-wrap1" class="policy-ed-del-wrapper" style="display: none;">
                <a class="btn color-bk-btn policy-edit-wrap" href="#">Edit</a>&nbsp; <a class="btn color-bk-btn policy-delet-wrap" href="#">Delete</a>
            </div>
        </div>
        <div class="policy-loc-row">
            <input type="radio" name="location1" id="location2" /><label for="radio1"><span><span></span></span>Valuables</label>
            <script type="text/javascript">
				$(document).ready(function() {
					$('#location2').click(function () {
						$("#policy-ed-del-wrap2").fadeIn('slow');
						$("#policy-ed-del-wrap1").fadeOut('slow');
					});
				});
            </script>
            <div id="policy-ed-del-wrap2" class="policy-ed-del-wrapper" style="display: none;">
                <a class="btn color-bk-btn policy-edit-wrap" href="#">Edit</a>&nbsp; <a class="btn color-bk-btn policy-delet-wrap" href="#">Delete</a>
            </div>
        </div>
        <div class="clearfix"></div>
        <input type="submit" name="newcover" value="New Cover">
    </div>
</div>
<script type="text/javascript">
    $(document).on('keyup', '.sumoftotalcover', function () {
        var sum = 0;
        $(".sumoftotalcover").each(function () {
            sum += +$(this).val();
        });
        $("#totalsuminsured").text(sum);
        $("#totalcover").val(sum);
    });
    function tnameAdd(id) {
        var countId = id + 1;
        var replaceA = '<a href="javascript:void(0)" onclick="tnameRemove(' + id + ')" class="button-3d">-</a>';
        var html = '<tr id="tname-tr-' + countId + '"><td> @Html.TextBoxFor(p => p.DescriptionObj.Description, new { @class = "form-control form-inline field-length-lg no-border", @id = "description", @placeholder = "Engagement Ring", @style = "width:100%;" }) @Html.HiddenFor(p => p.DescriptionObj.EiId)</td><td class="price stotal">$ &nbsp;@Html.TextBoxFor(p => p.SuminsuredObj.Suminsured, new { @class = "form-control form-inline field-length-xs no-border sumoftotalcover", @id = "suminsured", @placeholder = "15000" })/-@Html.HiddenFor(p => p.SuminsuredObj.EiId)</td > <td class="no-border" id="tname-' + countId + '"><a href="javascript:void(0)" onclick="tnameAdd('+countId+')" class="button-3d">+</a></td></tr>';
        $("#tname-" + id).html(replaceA);
        $("#tname-tr-" + id).after(html);
    }
    function tnameRemove(id) {
        $("#tname-tr-" + id).remove();
        var sum = 0;
        $(".sumoftotalcover").each(function () {
            sum += +$(this).val();
        });
        $("#totalsuminsured").text(sum);
        $("#totalcover").val(sum);
    }
</script>
<script type="text/javascript" src="~/Scripts/jquery.validate.js"></script>
<script type="text/javascript" src="~/Scripts/additional-methods.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $.validator.addMethod("regex", function (value, element, regexp) {
            if (regexp.constructor != RegExp)
                regexp = new RegExp(regexp);
            else if (regexp.global)
                regexp.lastIndex = 0;
            return this.optional(element) || regexp.test(value);
        }, "Please check your input.");
        $("form[name='valuables']").validate({
            errorContainer: "#errorContainer",
            errorLabelContainer: "#errorContainer",
            errorElement: "li",
            rules: {
                "LocationObj.Location": {
                    regex: /^[a-zA-Z ]*$/,
                },
                "suburb": "required",
                "state": "required",
                "postcode": {
                    regex: /^[0-9]*$/,
                },
                "UnspecificObj.Unspecific": {
                    regex: /^[0-9]*$/,
                },
                "DescriptionObj.Description": {
                    required:true,
                    regex: /^[a-zA-Z ]*$/,
                },
                "SuminsuredObj.Suminsured": {
                    required: true,
                    regex: /^[0-9]*$/,
                },
                "ExcessObj.Excess": {
                    required: function (el) {
                        if ($("#unspecific").val() != '') {
                            return true;
                        }
                    },
                },
            },
            messages: {
                "LocationObj.Location": "Special character and Number not allowed in location ",
                "postcode": {
                    regex: "Only numeric allowed"
                },
                "UnspecificObj.Unspecific": {
                    regex: "Special character not allowed"
                },
                "DescriptionObj.Description": {
                    required: "Please enter description",
                    regex: "Special character and Number not allowed",
                },
                "SuminsuredObj.Suminsured": {
                    required: "Please enter sum insured",
                    regex: "Only numeric allowed",
                },
                "ExcessObj.Excess": "Please select excess",
            },
            onfocusout: function (element) {
                this.element(element);
            },
            submitHandler: function (form) {
                form.submit();
            }
        });
    });
</script>