@model InsureThatAPI.Models.DisclosureDetails
@{
    ViewBag.Title = "Disclosure Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 policy-indiv-head">
    <h4><span>@*RURAL LIFESTYLE POLICY*@</span> DISCLOSURE</h4>
</div>
<div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 endorsmentview">
    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 policy-full-head">
        <h2>INSURED'S DISCLOSURE DETAILS</h2>
    </div>
    <div class="col-md-6 col-sm-6 col-xs-12 pull-right">
        <div class="pull-right">
            <button type="button" href="#savepolicy" role="button" data-target="#savepolicy" data-toggle="modal" class="button-3d nomargin tab-linker" id="premium" style="width:auto;border:none;background-color:#000000;color:#FFFFFF;margin-top:10px;line-height:22px;">Save Policy</button>
            <button type="button" href="#referralListModel" role="button" data-target="#referralListModel" data-toggle="modal" class="button-3d nomargin tab-linker" id="referralList" style="width:auto;border:none;background-color:#000000;color:#FFFFFF;margin-top:10px;line-height:22px;">Referral List</button>
            <button type="button" href="#premiumModel" role="button" data-target="#premiumModel" data-toggle="modal" class="button-3d nomargin tab-linker" id="premium" style="width:auto;border:none;background-color:#000000;color:#FFFFFF;margin-top:10px;line-height:22px;">Premium</button>
            <button type="button" href="#" role="button"  class="button-3d nomargin tab-linker" id="goback" style="width:auto;border:none;background-color:#000000;color:#FFFFFF;margin-top:-10px important;line-height:22px;">Go Back</button>
         </div>
    </div>
    <div id="referralListModel" class="modal" data-easein="fadeIn" tabindex="-1" role="dialog" aria-labelledby="referralListModel" aria-hidden="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="pull-left">Referral List</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        <img src="~/images/close-icon.png" />
                    </button>
                </div>
                <div class="modal-body">
                    @*@if (Model.Referels != null && Model.Referels.Count() > 0)
                        {
                            for (int j = 0; j < Model.Referels.Count(); j++)
                            {
                                @Model.Referels[j]<br />
                            }
                        }
                        else
                        {
                            <p>No Referral List</p>
                        }*@
                    <p id="referralList-p"></p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default no-border" data-dismiss="modal" aria-hidden="true"> Back </button>
                </div>
            </div>
        </div>
    </div>
    <div id="savepolicy" class="modal" data-easein="fadeIn" tabindex="-1" role="dialog" aria-labelledby="savepolicy" aria-hidden="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="padding: 15px 26px 0px;">
                    <h3 class="pull-left">Save Policy</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        <img src="~/images/close-icon.png" />
                    </button>
                </div>
                <div class="modal-body">
                    <p>
                        Do you wish to save your policy till now and continue later.
                    </p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default no-border" data-dismiss="modal" aria-hidden="true"> Back </button>
                    <button class="btn btn-default no-border savepolicyP" data-dismiss="modal" aria-hidden="true"> Save </button>
                </div>
            </div>
        </div>
    </div>
    <div id="premiumModel" class="modal" data-easein="fadeIn" tabindex="-1" role="dialog" aria-labelledby="premiumModel" aria-hidden="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="padding: 15px 26px 0px;">
                    <h3 class="pull-left">Premium Details</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        <img src="~/images/close-icon.png" />
                    </button>
                </div>
                <div class="modal-body">
                    <table class="table" style=" width: 100%; ">
                        <thead>
                            <tr>
                                <th class="space_left">Section Name</th>
                                <th class="space_left">Base</th>
                                <th class="space_left">Fsl</th>
                                <th class="space_left">Gst</th>
                                <th class="space_left">Stamp Duty</th>
                                <th class="space_right">Gross</th>
                            </tr>
                        </thead>
                        <tbody id="premiumModel-p-b">
                            <tr>
                                <td colspan="6">No Premium Details</td>
                            </tr>
                        </tbody>
                        <tfoot id="premiumModel-p-f">
                            <tr>
                                <td colspan="6">No Premium Details</td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default no-border" data-dismiss="modal" aria-hidden="true"> Back </button>
                </div>
            </div>
        </div>
    </div>

    @using (Html.BeginForm("DisclosureDetails", "Disclosure", FormMethod.Post, new { enctype = "multipart/form-data", @name = "disclosureDetails", @id = "disclosureDetails" }))
    {
        @Html.AntiForgeryToken()
        @Html.HiddenFor(p => p.CustomerId, new { @id = "ciid" })
        @Html.HiddenFor(p => p.PcId, new { id = "pcidd" })  
        @Html.HiddenFor(p => p.PrId, new { id="prid"})
        <div class="clearfix mb-md-30 mt-10 mb-10">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 success savepolicyresult"></div>
            @if(Session["PolicyNo"] != null)
            {            
                <h5 class="clearfix col-md-12 col-sm-12 col-xs-12">Policy Number: @Session["PolicyNo"].ToString()</h5>
            }
            <p class="col-md-12 col-sm-12 col-xs-12">If the answer to any question marked with an asterisk (*) is "Yes", full details must be entered under "Provide Details" below.</p>
            <p class="col-md-12 col-sm-12 col-xs-12">&nbsp;</p>
            <p class="col-md-8 col-sm-8 col-xs-12">Previous insurer</p>
            <div class="col-md-4 col-sm-4 col-xs-12">
                @Html.TextBoxFor(p => p.PreviousinsurerObj.Pinsurer, new { @autocomplete = "off", @class = "form-control form-border-bottom vlidationInsure commondatatest", @data_eiid = @Model.PreviousinsurerObj.EiId, @id = "pinsurer" })
                @Html.HiddenFor(p => p.PreviousinsurerObj.EiId)
                <label id="PreviousinsurerObj.Pinsurer-error" class="error" for="PreviousinsurerObj.Pinsurer"></label>
            </div>
        </div>
        <div class="clearfix mb-md-30 mt-10 mb-10">
            <p class="col-md-8 col-sm-8 col-xs-12">* Have you ever had an insurer refuse cover or cancel or refuse to renew a policy or refuse to pay a claim?</p>
            <div class="col-md-4 col-sm-4 col-xs-12">
                <div class="col-md-6 col-sm-6 col-xs-12 policy-loc-row">@Html.RadioButtonFor(p => p.RenewpolicyObj.Rpolicy, '1', new { @id = "rpolicyyes", @class = "refus coRadioButtonDC commondataradio vlidationInsure", @data_eiid = @Model.RenewpolicyObj.EiId })<label for="radio1"><span><span></span></span>Yes</label></div>
                <div class="col-md-6 col-sm-6 col-xs-12 policy-loc-row">@Html.RadioButtonFor(p => p.RenewpolicyObj.Rpolicy, '0', new { @id = "rpolicyno", @class = "refus coRadioButtonDC commondataradio vlidationInsure", @data_eiid = @Model.RenewpolicyObj.EiId })<label for="radio1"><span><span></span></span>No</label></div>
                <label id="RenewpolicyObj.Rpolicy-error" class="error" for="RenewpolicyObj.Rpolicy" style="clear:both;"></label>
                @Html.HiddenFor(p => p.RenewpolicyObj.EiId)
            </div>
        </div>
        <div class="clearfix mb-md-30 mt-10 mb-10">
            <p class="col-md-8 col-sm-8 col-xs-12">* Have you been convicted of a criminal offence in the last 10 years?</p>
            <div class="col-md-4 col-sm-4 col-xs-12">
                <div class="col-md-6 col-sm-6 col-xs-12 policy-loc-row">@Html.RadioButtonFor(p => p.CriminaloffenceObj.Offence, '1', new { @id = "offenceyes", @class = "offc coRadioButtonDC commondataradio vlidationInsure", @data_eiid = @Model.CriminaloffenceObj.EiId })<label for="radio1"><span><span></span></span>Yes</label></div>
                <div class="col-md-6 col-sm-6 col-xs-12 policy-loc-row">@Html.RadioButtonFor(p => p.CriminaloffenceObj.Offence, '0', new { @id = "offenceno", @class = "offc coRadioButtonDC commondataradio vlidationInsure", @data_eiid = @Model.CriminaloffenceObj.EiId })<label for="radio1"><span><span></span></span>No</label></div>
                <label id="CriminaloffenceObj.Offence-error" class="error" for="CriminaloffenceObj.Offence" style="clear:both;"></label>
                @Html.HiddenFor(p => p.CriminaloffenceObj.EiId)
            </div>
        </div>
        <div class="clearfix mb-md-30 mt-10 mb-10">
            <p class="col-md-8 col-sm-8 col-xs-12">* Have you served a prison sentence in the last 10 years?</p>
            <div class="col-md-4 col-sm-4 col-xs-12">
                <div class="col-md-6 col-sm-6 col-xs-12 policy-loc-row">@Html.RadioButtonFor(p => p.PrisonsentenceObj.Sentence, '1', new { @id = "sentenceyes", @class = "prisonsen coRadioButtonDC commondataradio vlidationInsure", @data_eiid = @Model.PrisonsentenceObj.EiId })<label for="radio1"><span><span></span></span>Yes</label></div>
                <div class="col-md-6 col-sm-6 col-xs-12 policy-loc-row">@Html.RadioButtonFor(p => p.PrisonsentenceObj.Sentence, '0', new { @id = "sentenceno", @class = "prisonsen coRadioButtonDC commondataradio vlidationInsure", @data_eiid = @Model.PrisonsentenceObj.EiId })<label for="radio1"><span><span></span></span>No</label></div>
                <label id="PrisonsentenceObj.Sentence-error" class="error" for="PrisonsentenceObj.Sentence" style="clear:both;"></label>
                @Html.HiddenFor(p => p.PrisonsentenceObj.EiId)
            </div>
        </div>
        <div class="clearfix mb-md-30 mt-10 mb-10">
            <p class="col-md-8 col-sm-8 col-xs-12">Are you an undischarged bankrupt?</p>
            <div class="col-md-4 col-sm-4 col-xs-12">
                <div class="col-md-6 col-sm-6 col-xs-12 policy-loc-row">@Html.RadioButtonFor(p => p.UndischargedObj.Undischarge, '1', new { @id = "undischargeyes", @class = "undisch coRadioButtonDC commondataradio vlidationInsure", @data_eiid = @Model.UndischargedObj.EiId })<label for="radio1"><span><span></span></span>Yes</label></div>
                <div class="col-md-6 col-sm-6 col-xs-12 policy-loc-row">@Html.RadioButtonFor(p => p.UndischargedObj.Undischarge, '0', new { @id = "undischargeno", @class = "undisch coRadioButtonDC commondataradio vlidationInsure", @data_eiid = @Model.UndischargedObj.EiId })<label for="radio1"><span><span></span></span>No</label></div>
                <label id="UndischargedObj.Undischarge-error" class="error" for="UndischargedObj.Undischarge" style="clear:both;"></label>
                @Html.HiddenFor(p => p.UndischargedObj.EiId)
            </div>
        </div>
        <div class="clearfix mb-md-30 mt-10 mb-10">
            <p class="col-md-8 col-sm-8 col-xs-12">Have you been bankrupt in the last 10 years?</p>
            <div class="col-md-4 col-sm-4 col-xs-12">
                <div class="col-md-6 col-sm-6 col-xs-12 policy-loc-row">@Html.RadioButtonFor(p => p.BankruptObj.Bankrupt, '1', new { @id = "bankruptyes", @class = "commondataradio coRadioButtonDC vlidationInsure bnkrupt", @data_eiid = @Model.BankruptObj.EiId })<label for="radio1"><span><span></span></span>Yes</label></div>
                <div class="col-md-6 col-sm-6 col-xs-12 policy-loc-row">@Html.RadioButtonFor(p => p.BankruptObj.Bankrupt, '0', new { @id = "bankruptno", @class = "commondataradio coRadioButtonDC vlidationInsure bnkrupt", @data_eiid = @Model.BankruptObj.EiId })<label for="radio1"><span><span></span></span>No</label></div>
                <label id="BankruptObj.Bankrupt-error" class="error" for="BankruptObj.Bankrupt" style="clear:both;"></label>
                @Html.HiddenFor(p => p.BankruptObj.EiId)
            </div>
        </div>
        <div class="clearfix mb-md-30 mt-10 mb-10 datedschgr" style="display:none;">
            <p class="col-md-8 col-sm-8 col-xs-12">Discharge date</p>
            <div class="col-md-4 col-sm-4 col-xs-12">
                @Html.TextBoxFor(p => p.DateObj.Date, new { @autocomplete = "off", @class = "form-control form-border-bottom datePicker vlidationInsure commondataDDMMYYY", @data_eiid = @Model.DateObj.EiId, @id = "date", @data_inputmask_alias = "date", @data_inputmask_inputformat = "dd/mm/yyyy" })
                @Html.HiddenFor(p => p.DateObj.EiId)
                <label id="DateObj.Date-error" class="error" for="DateObj.Date"></label>
            </div>
        </div>
        <div class="clearfix mb-md-30 mt-10 mb-10">
            <p class="col-md-8 col-sm-8 col-xs-12">* Is any of the property that You wish to cover in immediate danger of being lost or damaged or is it already damaged?</p>
            <div class="col-md-4 col-sm-4 col-xs-12">
                <div class="col-md-6 col-sm-6 col-xs-12 policy-loc-row">@Html.RadioButtonFor(p => p.ImmediatedangerObj.Danger, '1', new { @id = "dangeryes", @class = "commondataradio coRadioButtonDC vlidationInsure immdlost", @data_eiid = @Model.ImmediatedangerObj.EiId })<label for="radio1"><span><span></span></span>Yes</label></div>
                <div class="col-md-6 col-sm-6 col-xs-12 policy-loc-row">@Html.RadioButtonFor(p => p.ImmediatedangerObj.Danger, '0', new { @id = "dangerno", @class = "commondataradio coRadioButtonDC vlidationInsure immdlost", @data_eiid = @Model.ImmediatedangerObj.EiId })<label for="radio1"><span><span></span></span>No</label></div>
                <label id="ImmediatedangerObj.Danger-error" class="error" for="ImmediatedangerObj.Danger" style="clear:both;"></label>
                @Html.HiddenFor(p => p.ImmediatedangerObj.EiId)
            </div>
        </div>
        <div class="clearfix mb-md-30 mt-10 mb-10">
            <p class="col-md-8 col-sm-8 col-xs-12">* Do you wish to tell Us something extra as part of Your Duty of Disclosure?</p>
            <div class="col-md-4 col-sm-4 col-xs-12">
                <div class="col-md-6 col-sm-6 col-xs-12 policy-loc-row">@Html.RadioButtonFor(p => p.DutydisclosureObj.Dutydisclosure, '1', new { @id = "dutydisclosureyes", @class = "commondataradio coRadioButtonDC vlidationInsure dutydis", @data_eiid = @Model.DutydisclosureObj.EiId })<label for="radio1"><span><span></span></span>Yes</label></div>
                <div class="col-md-6 col-sm-6 col-xs-12 policy-loc-row">@Html.RadioButtonFor(p => p.DutydisclosureObj.Dutydisclosure, '0', new { @id = "dutydisclosureno", @class = "commondataradio coRadioButtonDC vlidationInsure dutydis", @data_eiid = @Model.DutydisclosureObj.EiId })<label for="radio1"><span><span></span></span>No</label></div>
                <label id="DutydisclosureObj.Dutydisclosure-error" class="error" for="DutydisclosureObj.Dutydisclosure" style="clear:both;"></label>
                @Html.HiddenFor(p => p.DutydisclosureObj.EiId)
            </div>
        </div>
        @*<div class="clearfix mb-md-30 mt-10 mb-10">
                <p class="col-md-8 col-sm-8 col-xs-12">Duty of Disclosure date</p>
                <div class="col-md-4 col-sm-4 col-xs-12">
                    @Html.TextBoxFor(p => p.DetailsboxObj.Details, new { @class = "form-control form-border-bottom datePicker vlidationInsure commondataDDMMYYY", @data_eiid = @Model.DetailsboxObj.EiId, @id = "details", @data_inputmask_alias = "date", @data_inputmask_inputformat = "dd/mm/yyyy" })
                    @Html.HiddenFor(p => p.DetailsboxObj.EiId)
                    <label id="DetailsboxObj.Details-error" class="error" for="DetailsboxObj.Details"></label>
                </div>
            </div>*@
        <div class="clearfix mb-md-30 mt-10 mb-10 detailsbbox hidden">
            <p class="col-md-4 col-sm-4 col-xs-12">Please provide details</p>
            <div class="col-md-8 col-sm-8 col-xs-12">
                @*<input type="text" autocomplete="off" placeholder="Enter Details" class="form-control  form-border-bottom" />*@
                @Html.TextBoxFor(p => p.DetailsboxObj.Details, new { @class = "form-control  form-border-bottom vlidationInsure" ,@id="dd", @data_eiid = @Model.DetailsboxObj.EiId })
                
                @Html.HiddenFor(p => p.DetailsboxObj.EiId)
                <label id="DetailsboxObj.Details-error" class="error" for="DetailsboxObj.Details"></label>
            </div>
        </div>
        <div class="col-md-6 pull-right text-right mt-30">
            <button type="submit" class="button-3d nomargin tab-linker quot-next-btn" id="ptabbtnFHC">Save & Continue</button>
        </div>
    }
</div>
<div class="col-lg-3 col-md-3 col-sm-3 col-xs-12 policy-side-wrap">
    <h3>Policy Sections</h3>
    <div class="well">
        @if (Model.PolicyInclusion != null && Model.PolicyInclusion.Count() > 0)
        {
            for (int i = 0; i < Model.PolicyInclusion.Count(); i++)
            {
                <div class="policy-loc-row">
                    @Html.RadioButtonFor(m => m.SelectedInclusion, @Model.PolicyInclusion[i].Name, new { @class = "inclusions", @data_name = @Model.PolicyInclusion[i].Name, @data_nid = @i })<label for="radio1"><span><span></span></span>@Model.PolicyInclusion[i].Name</label>
                    <script type="text/javascript">
                        $(document).ready(function () {
                            $('.inclusions').click(function () {
                                var name = $(this).attr('data-name');
                                var nid = $(this).attr('data-nid');
                                $('.policy-ed-del-wrapper').hide();
                                $("#policy-ed-del-wrap-" + nid).show();

                            });
                        });
                    </script>
                    <div id="policy-ed-del-wrap-@i" class="policy-ed-del-wrapper" data style="display: none;">
                        <a class="btn color-bk-btn policy-edit-wrap" data-policystatus="@Model.PolicyStatus" data-name="@Model.PolicyInclusion[i].Name" data-cid="@Model.CustomerId" data-unid="@Model.PolicyInclusion[i].UnId" data-profileid="@Model.PolicyInclusion[i].ProfileUnId" href="javascript:void(0);">Edit</a>&nbsp;
                        <a class="btn color-bk-btn policy-delet-wrap" data-policystatus="@Model.PolicyStatus" data-name="@Model.PolicyInclusion[i].Name" data-cid="@Model.CustomerId" data-unid="@Model.PolicyInclusion[i].UnId" data-profileid="@Model.PolicyInclusion[i].ProfileUnId" href="javascript:void(0);">Delete</a>
                    </div>
                </div>
            }
            <script>
                $(".policy-edit-wrap").click(function () {
                    var selectedname = $(this).data('name');
                    var selectedunid = $(this).data('unid');
                    var selectedprofileid = $(this).data('profileid');
                    var selectedcid = $(this).data('cid');
                    var selectedTrId = $(this).data('trid');
                    var PcId = $(this).data('pcid');
                    var policyStatus = $(this).data('policystatus');
                    var prid = $("#prid").val();
                    // var prId = $(this).data('prId');
                    var prId = prid;
                    $.ajax({
                        type: "POST",
                        url: "/Customer/EndorsePolicy",
                        data: {
                            "name": selectedname, "PcId": PcId, "cid": selectedcid, "trId": selectedTrId, "unid": selectedunid, "Profileid": selectedprofileid, "prId": prId, "policyStatus": policyStatus, "effcdate": null
                        },
                        success: function (responce) {
                            if (responce.Status == false) {
                                $(".error").css("color", "red").html("Failed to edit section, there is a problem in core system.").show().delay(100000).fadeOut();
                                $("html, body").animate({ scrollTop: 0 }, "slow");
                            } else {
                                window.location.href = responce;
                            }
                        }
                    });
                });
                $(".policy-delet-wrap").click(function () {
                    var r = confirm("Are you sure you want to delete this section?");
                    if (r == true) {
                        var PcId = $("#pcidd").val();
                        var selectedunid = $(this).data('unid');
                        var selectedcid = $(this).data('cid');
                        var PcId = $(this).data('pcid');
                        var selectedname = $(this).data('name');
                        var selectedprofileid = $(this).data('profileid');
                        var selectedTrId = $(this).data('trid');
                        var policyStatus = $(this).data('policystatus');
                        var currId = $(this).attr("id");
                        $.ajax({
                            type: "POST",
                            url: "/Customer/DeleteUnit",
                            data: { "unid": selectedunid, "cid": selectedcid, "pcid": PcId, "unit": selectedname, "profileid": selectedprofileid, "trid": selectedTrId, "policystatus": policyStatus },
                            success: function (responce) {
                                if (responce.Status == true) {
                                    var prentId = $('#' + currId).parent().parent().attr("id");
                                    $('#' + prentId).remove();
                                }
                            }
                        });
                    }
                });
                $("#bindcover").click(function () {
                    $.ajax({
                        type: "POST",
                        url: "/Customer/BindCover",
                        data: {},
                        success: function (responce) {
                        }
                    });
                });
            </script>
        }
        else
        {
            if (Model.PolicyInclusions != null && Model.PolicyInclusions.Count() > 0)
            {
                for (int i = 0; i < Model.PolicyInclusions.Count(); i++)
                {
                    <div class="policy-loc-row">
                        @Html.RadioButtonFor(m => m.SelectedInclusion, @i, new { @class = "inclusions", @data_name = @i, @data_nid = @i, @title = "Home Building should be filled first." })<label for="radio1"><span><span></span></span>@Model.PolicyInclusions[i].name</label>
                        <script type="text/javascript">
                            $(document).ready(function () {
                                $('.inclusions').click(function () {
                                    var name = $(this).attr('data-name');
                                    var nid = $(this).attr('data-nid');
                                    $('.policy-ed-del-wrapper').hide();
                                    $("#policy-ed-del-wrap-" + nid).show();

                                });
                            });
                        </script>
                        <div id="policy-ed-del-wrap-@i" class="policy-ed-del-wrapper" data style="display: none;">
                            <a class="btn color-bk-btn policy-edit-wrap" data-policystatus="@Model.PolicyStatus" data-name="@Model.PolicyInclusions[i].name" data-cid="@Model.CustomerId" data-unid="@Model.PolicyInclusions[i].UnitId" data-profileid="@Model.PolicyInclusions[i].ProfileId" href="javascript:void(0);">Edit</a>&nbsp;
                            <a class="btn color-bk-btn policy-delet-wrap" data-policystatus="@Model.PolicyStatus" data-name="@Model.PolicyInclusions[i].name" data-cid="@Model.CustomerId" data-unid="@Model.PolicyInclusions[i].UnitId" data-profileid="@Model.PolicyInclusions[i].ProfileId" href="javascript:void(0);">Delete</a>
                        </div>
                    </div>
                    <script>
                            $(".policy-edit-wrap").click(function () {

                                var selectedname = $(this).data('name');
                                var selectedunid = $(this).data('unid');
                                var selectedprofileid = $(this).data('profileid');
                                var selectedcid = $(this).data('cid');
                                var selectedTrId = $(this).data('trid');
                                var PcId = $(this).data('pcid');
                                var policyStatus = $(this).data('policystatus');
                                var prid = $("#prid").val();
                                // var prId = $(this).data('prId');
                                var prId = prid;                               
                                $.ajax({
                                    type: "POST",
                                    url: "/Customer/EndorsePolicy",
                                    data: {
                                        "name": selectedname, "PcId": PcId, "cid": selectedcid, "trId": selectedTrId, "unid": selectedunid, "Profileid": selectedprofileid, "prId": prId, "policyStatus": policyStatus, "calltype": 1, "effcdate": null
                                    },
                                    success: function (responce) {
                                        if (responce.Status == false) {
                                            $(".error").css("color", "red").html("Failed to edit section, there is a problem in core system.").show().delay(100000).fadeOut();
                                            $("html, body").animate({ scrollTop: 0 }, "slow");
                                        } else {
                                            window.location.href = responce;
                                        }
                                    }
                                });
                            });
                            $(".policy-delet-wrap").click(function () {
                                var r = confirm("Are you sure you want to delete this section?");
                                if (r == true) {
                                    var PcId = $("#pcidd").val();
                                    var selectedunid = $(this).data('unid');
                                    var selectedcid = $(this).data('cid');
                                    var PcId = $(this).data('pcid');
                                    var selectedname = $(this).data('name');
                                    var selectedprofileid = $(this).data('profileid');
                                    var selectedTrId = $(this).data('trid');
                                    var policyStatus = $(this).data('policystatus');
                                    var currId = $(this).attr("id");
                                    $.ajax({
                                        type: "POST",
                                        url: "/Customer/DeleteUnit",
                                        data: { "unid": selectedunid, "cid": selectedcid, "pcid": PcId, "unit": selectedname, "profileid": selectedprofileid, "trid": selectedTrId, "policystatus": policyStatus },
                                        success: function (responce) {
                                            if (responce.Status == true) {
                                                var prentId = $('#' + currId).parent().parent().attr("id");
                                                $('#' + prentId).remove();
                                            }
                                        }
                                    });
                                }
                            });
                    </script>
                }
            }

        }
        <div class="clearfix"></div>
        @*<div class="dropdown pc pc-in">
            <a class="new-cover-policy" href="javascript:void(0);">New Cover</a>
            <ul class="dropdown-menu col-md-12 unit">
                <li><a href="javascript:void(0);" class="Home Buildings">+  Home Buildings</a></li>
                <li><a href="javascript:void(0);" class="Home Contents">+  Home Contents</a></li>
                <li><a href="javascript:void(0);" class="Farm Property">+  Farm Property</a></li>
                <li><a href="javascript:void(0);" class="Valuables">+  Valuables</a></li>
                <li><a href="javascript:void(0);" class="Motor">+  Motor</a></li>
                <li><a href="javascript:void(0);" class="Pet">+  Pet</a></li>

                <li><a href="javascript:void(0);" class="Travel">+  Travel</a></li>
                <li><a href="javascript:void(0);" class="Boat">+  Boat</a></li>
            </ul>
            <script type="text/javascript">
                            $(document).on('click', 'ul.unit > li', function () {
                                var unitname = $(this).children("a").attr("class");
                                var cid = $("#ciid").val();
                                var pcid = $("#pcidd").val();
                                var prid = 1029;
                                $.ajax({
                                    type: "POST",
                                    url: "/Customer/AddUnit",
                                    data: { "unit": unitname, cid: cid, PcId: pcid, Prid: prid },
                                    success: function (responce) {
                                        if (responce.Status == false) {
                                            $(".error").css("color", "red").html("Failed to add section, there is a problem in core system.").show().delay(100000).fadeOut();
                                            $("html, body").animate({ scrollTop: 0 }, "slow");
                                        } else {
                                            window.location.href = responce;
                                        }
                                    }
                                });
                            });
            </script>
        </div>*@
    </div>
</div>
<script src="~/js/jquery.inputmask.bundle.js"></script>
<script src="~/js/inputmask.date.extensions.js"></script>
<script type="text/javascript">
                            $(document).ready(function () {
                                $(".datePicker").inputmask("99/99/9999", { "placeholder": "dd/mm/yyyy" });
                            });
</script>
<script type="text/javascript">
                            var validdetails = 1;
                            $(document).on('click', '.savepolicyP', function () {
                                var prid = $("#prid").val();
                                // var prId = $(this).data('prId');
                                var prId = prid;                            
                                $.ajax({
                                    type: "POST",
                                    url: "/Customer/SavePolicy",
                                    data: { "PrId": prId },
                                    success: function (res) {
                                        if (res.status == true) {
                                            var html = '<div class="alert alert-success"><strong>' + res.result + '</strong></div>';
                                            $('.savepolicyresult').html(html).delay(10000).fadeOut();
                                        } else {
                                            var html = '<div class="alert alert-danger"><strong>' + res.result + '</strong></div>';
                                            $('.savepolicyresult').html(html).delay(10000).fadeOut();
                                        }
                                    }
                                });
                            });
                            $(document).on('click', '.coRadioButtonDC', function () {
                                var prebox1 = $("input[name='RenewpolicyObj.Rpolicy']:checked").val();
                                var prebox2 = $("input[name='CriminaloffenceObj.Offence']:checked").val();
                                var prebox3 = $("input[name='PrisonsentenceObj.Sentence']:checked").val();
                                var prebox4 = $("input[name='UndischargedObj.Undischarge']:checked").val();
                                var prebox5 = $("input[name='BankruptObj.Bankrupt']:checked").val();
                                var prebox6 = $("input[name='ImmediatedangerObj.Danger']:checked").val();
                                var prebox7 = $("input[name='DutydisclosureObj.Dutydisclosure']:checked").val();
                                if (prebox7 == 1 || prebox6 == 1 || prebox5 == 1 || prebox4 == 1 || prebox3 == 1 || prebox2 == 1 || prebox1 == 1) {
                                    $(".detailsbbox").show().removeClass('hidden');
                                    validdetails = 0;
                                }
                                else {
                                    $(".detailsbbox").addClass('hidden');
                                    validdetails = 1;
                                }
                                if (prebox5 == 1)
                                {
                                    $(".datedschgr").removeClass('hidden').show();
                                }
                            });
                            $(document).ready(function () {
                                var prebox1 = $("input[name='RenewpolicyObj.Rpolicy']:checked").val();
                                var prebox2 = $("input[name='CriminaloffenceObj.Offence']:checked").val();
                                var prebox3 = $("input[name='PrisonsentenceObj.Sentence']:checked").val();
                                var prebox4 = $("input[name='UndischargedObj.Undischarge']:checked").val();
                                var prebox5 = $("input[name='BankruptObj.Bankrupt']:checked").val();
                                var prebox6 = $("input[name='ImmediatedangerObj.Danger']:checked").val();
                                var prebox7 = $("input[name='DutydisclosureObj.Dutydisclosure']:checked").val();
                                if (prebox7 == 1 || prebox6 == 1 || prebox5 == 1 || prebox4 == 1 || prebox3 == 1 || prebox2 == 1 || prebox1 == 1) {
                                    //alert(prebox7 + '-' + prebox6 + '-' + prebox5 + '-' + prebox4 + '-' + prebox3 + '-' + prebox2 + '-' + prebox1);
                                    $(".detailsbbox").show().removeClass('hidden');
                                    validdetails = 0;
                                }
                                else {
                                    $(".detailsbbox").addClass('hidden');
                                    validdetails = 1;
                                }
                            });
                            $(document).ready(function () {
                                $("#ptabbtnFHC").click(function (e) {
                                    e.preventDefault();
                                    var valid = 1;
                                    $(".vlidationInsure").each(function () {
                                        var id = $(this).attr('id');
                                        var nameAttr = $(this).attr('name');
                                        var lastChar = id.substr(id.length - 1);
                                        var newval = $(this).val();
                                        if (nameAttr == "PreviousinsurerObj.Pinsurer") {
                                            var regex = /^[a-zA-Z ]*$/;
                                            if ($('#dataofbirth' + lastChar).val() != '' && newval == '') {
                                                $('#' + id).css({ "border": "1px solid #ff0000" });
                                                $("label[for='" + nameAttr + "']").text('Please answer this question').css({ "display": "block" });
                                                valid = 0;
                                            //} else if (!regex.test(newval)) {
                                            //    $('#' + id).css({ "border": "1px solid #ff0000" });
                                            //    $("label[for='" + nameAttr + "']").text('Special character & numeric are not allowed').css({ "display": "block" });
                                            //    valid = 0;
                                            } else {
                                                $('#' + id).css({ "border": "" });
                                                $("label[for='" + nameAttr + "']").text("");
                                            }
                                        }
                                        if (nameAttr == "RenewpolicyObj.Rpolicy") {
                                            if ($("input[name='" + nameAttr + "']:checked").val() == undefined) {
                                                $('#' + id).css({ "border": "1px solid #ff0000" });
                                                $("label[for='" + nameAttr + "']").text('Please answer this question').css({ "display": "block" });
                                                valid = 0;
                                            } else {
                                                $('#' + id).css({ "border": "" });
                                                $("label[for='" + nameAttr + "']").text("");
                                            }
                                        }
                                        if (nameAttr == "CriminaloffenceObj.Offence") {
                                            if ($("input[name='" + nameAttr + "']:checked").val() == undefined) {
                                                $('#' + id).css({ "border": "1px solid #ff0000" });
                                                $("label[for='" + nameAttr + "']").text('Please answer this question').css({ "display": "block" });
                                                valid = 0;
                                            } else {
                                                $('#' + id).css({ "border": "" });
                                                $("label[for='" + nameAttr + "']").text("");
                                            }
                                        }
                                        if (nameAttr == "PrisonsentenceObj.Sentence") {
                                            if ($("input[name='" + nameAttr + "']:checked").val() == undefined) {
                                                $('#' + id).css({ "border": "1px solid #ff0000" });
                                                $("label[for='" + nameAttr + "']").text('Please answer this question').css({ "display": "block" });
                                                valid = 0;
                                            } else {
                                                $('#' + id).css({ "border": "" });
                                                $("label[for='" + nameAttr + "']").text("");
                                            }
                                        }
                                        if (nameAttr == "UndischargedObj.Undischarge") {
                                            if ($("input[name='" + nameAttr + "']:checked").val() == undefined) {
                                                $('#' + id).css({ "border": "1px solid #ff0000" });
                                                $("label[for='" + nameAttr + "']").text('Please answer this questiont').css({ "display": "block" });
                                                valid = 0;
                                            } else {
                                                $('#' + id).css({ "border": "" });
                                                $("label[for='" + nameAttr + "']").text("");
                                            }
                                        }
                                        if (nameAttr == "BankruptObj.Bankrupt") {
                                            if ($("input[name='" + nameAttr + "']:checked").val() == undefined) {
                                                $('#' + id).css({ "border": "1px solid #ff0000" });
                                                $("label[for='" + nameAttr + "']").text('Please answer this question').css({ "display": "block" });
                                                valid = 0;
                                            } else {
                                                $('#' + id).css({ "border": "" });
                                                $("label[for='" + nameAttr + "']").text("");
                                            }
                                        }
                                        if (nameAttr == "DateObj.Date") {
                                            var regex = /^(0?[1-9]|[12][0-9]|3[01])[\/](0?[1-9]|1[012])[\/]\d{4}$/;
                                            var rVal = newval.split('/');
                                            var currentYear = new Date().getFullYear();
                                      
                                            var uptoYears = 0;
                                            var diffDateCalculatePets = true;
                                            if (regex.test(newval)) {
                                                uptoYears = CalculateDiff(newval);
                                                var newDatePets = rVal[1] + '/' + rVal[0] + '/' + rVal[2];
                                                diffDateCalculatePets = diffDateCalculateER(newDatePets);
                                            }
                                            if (newval != '' && !regex.test(newval)) {
                                                $('#' + id).css({ "border": "1px solid #ff0000" });
                                                $("label[for='" + nameAttr + "']").text('Please enter an appropriate year').css({ "display": "block" });
                                                valid = 0;
                                            } else if (newval != '' && rVal[2] != '' && rVal[2].length != 4) {
                                                $('#' + id).css({ "border": "1px solid #ff0000" });
                                                $("label[for='" + nameAttr + "']").text('Please enter an appropriate year').css({ "display": "block" });
                                                valid = 0;
                                            } else if (diffDateCalculatePets == false) {
                                                $('#' + id).css({ "border": "1px solid #ff0000" });
                                                $("label[for='" + nameAttr + "']").text('You cannot provide a date in the future').css({ "display": "block" });
                                                valid = 0;
                                            } else if (newval != "") {
                                                $('#' + id).css({ "border": "" });
                                                $("label[for='" + nameAttr + "']").text('').css({ "display": "none" });
                                            }
                                        }
                                        if (nameAttr == "ImmediatedangerObj.Danger") {
                                            if ($("input[name='" + nameAttr + "']:checked").val() == undefined) {
                                                $('#' + id).css({ "border": "1px solid #ff0000" });
                                                $("label[for='" + nameAttr + "']").text('Please answer this question').css({ "display": "block" });
                                                valid = 0;
                                            } else {
                                                $('#' + id).css({ "border": "" });
                                                $("label[for='" + nameAttr + "']").text("");
                                            }
                                        }
                                        if (nameAttr == "DutydisclosureObj.Dutydisclosure") {
                                            if ($("input[name='" + nameAttr + "']:checked").val() == undefined) {
                                                $('#' + id).css({ "border": "1px solid #ff0000" });
                                                $("label[for='" + nameAttr + "']").text('Please answer this question').css({ "display": "block" });
                                                valid = 0;
                                            } else {
                                                $('#' + id).css({ "border": "" });
                                                $("label[for='" + nameAttr + "']").text("");
                                            }
                                        }
                                     
                                        if (validdetails == "0")
                                        {
                                            if (nameAttr == "DetailsboxObj.Details") {
                                                var regex = /^[a-zA-Z ]*$/;
                                                if ($('#dd' + lastChar).val() != '' && newval == '') {
                                                    $('#' + id).css({ "border": "1px solid #ff0000" });
                                                    $("label[for='" + nameAttr + "']").text('Please answer this question').css({ "display": "block" });
                                                    valid = 0;
                                                //} else if (!regex.test(newval)) {
                                                //    $('#' + id).css({ "border": "1px solid #ff0000" });
                                                //    $("label[for='" + nameAttr + "']").text('Special character & numeric are not allowed').css({ "display": "block" });
                                                //    valid = 0;
                                                } else {
                                                    $('#' + id).css({ "border": "" });
                                                    $("label[for='" + nameAttr + "']").text("");
                                                }
                                            }

                                        }
                                    });
                                    if (valid == 1) {
                                        $("form[name='disclosureDetails']").submit();
                                    }
                                });
                            });
                            $(document).on('focusout', ".commondatatest", function () {
                                var Value = $(this).val();
                                var EIId = $(this).data('eiid');
                                var ItIdN = $(this).data('itid');
                                var Nregex = $(this).data('regex');
                                var name = $(this).attr('name');
                                var id = $(this).attr('id');
                                if (ItIdN == undefined || ItIdN == "") {
                                    var ItId = "0";
                                } else {
                                    var ItId = ItIdN;
                                }
                                var regex = "";
                                var text = "";
                                if (Nregex == 'N') {
                                    regex = /^[0-9]*$/;
                                    text = "Only numeric are allowed";
                                    Value = Value.replace(/,/g, '');
                                } else if (Nregex == 'A') {
                                    //regex = /^[a-zA-Z ]*$/;
                                    //text = "Special character & numeric are not allowed";
                                } else if (Nregex == 'AN') {
                                    //regex = /^[a-zA-Z0-9 ]*$/;
                                    //text = "Special character are not allowed";
                                } else if (Nregex == 'AS') {
                                    regex = /^[a-zA-Z/ ]*$/;
                                    text = "Numericare not allowed";
                                } else if (Nregex == 'NS') {
                                    regex = /^[0-9/ ]*$/;
                                    text = "Numeric & '/' are allowed";
                                }
                                if (Value != '' && regex != '' && !regex.test(Value)) {
                                    $('#' + id).css({ "border": "1px solid #ff0000" });
                                    $("label[for='" + name + "']").text(text).css({ "display": "block" });
                                } else if (Value != "") {
                                    $('#' + id).css({ "border": "" });
                                    $("label[for='" + name + "']").text('').css({ "display": "none" });
                                    elementAjaxCall(Value, EIId, ItId);
                                }
                            });
                            function elementAjaxCall(Value, EIId, ItId) {
                                var prid = $("#prid").val();
                                // var prId = $(this).data('prId');
                                var prId = prid;
                                if (Value != '' && EIId != '') {
                                    $.ajax({
                                        url: '/Customer/ElementDetails',
                                        type: "POST",
                                        crossOrigin: true,
                                        data: { "PrId": prId, "ElId": EIId, "Value": Value, "ItId": ItId },
                                        success: function (data) {
                                            if (!$.isEmptyObject(data.valuedata) && data.valuedata.length > 0) {
                                                var valuedata = data.valuedata;
                                                if (valuedata != '' && valuedata != null) {
                                                    $.each(valuedata, function (index, value) {
                                                        var StateIdNewOne = $("[data-eiid=" + value.Element.ElId + "]").attr('id');
                                                        //$('#' + StateIdNewOne).val(value.Value);
                                                        if (!$.isEmptyObject(data.stateData) && data.stateData.length > 0) {
                                                            var statedata = data.stateData;
                                                            if (statedata != '' && statedata != null) {
                                                                $.each(statedata, function (index1, value1) {
                                                                    var StateIdNew = $("[data-eiid=" + value1.Element.ElId + "]").attr('id');
                                                                    if (value1.Value == 'Invisible') {
                                                                        $('#' + StateIdNew).removeAttr('readonly');
                                                                        $('#' + StateIdNew).removeAttr('disabled');
                                                                        $('#' + StateIdNew).css({ 'text-decoration': '' });
                                                                        $('.cl-' + value1.Element.ElId).css({ 'display': 'none' });
                                                                        $('#' + StateIdNew).removeAttr('required', 'required');
                                                                    } else if (value1.Value == 'Disabled') {
                                                                        $('#' + StateIdNew).attr('disabled', 'disabled');
                                                                        $('#' + StateIdNew).removeAttr('readonly');
                                                                        $('#' + StateIdNew).css({ 'text-decoration': '' });
                                                                        $('.cl-' + value1.Element.ElId).css({ 'display': 'block' });
                                                                        $('#' + StateIdNew).removeAttr('required', 'required');
                                                                    } else if (value1.Value == 'Read Only') {
                                                                        $('#' + StateIdNew).attr('readonly', 'readonly');
                                                                        $('#' + StateIdNew).removeAttr('disabled');
                                                                        $('#' + StateIdNew).css({ 'text-decoration': '' });
                                                                        $('.cl-' + value1.Element.ElId).css({ 'display': 'block' });
                                                                        $('#' + StateIdNew).removeAttr('required', 'required');
                                                                    } else if (value1.Value == 'Strike Through') {
                                                                        $('#' + StateIdNew).css({ 'text-decoration': 'line-through' });
                                                                        $('#' + StateIdNew).removeAttr('readonly');
                                                                        $('#' + StateIdNew).removeAttr('disabled');
                                                                        $('.cl-' + value1.Element.ElId).css({ 'display': 'block' });
                                                                        $('#' + StateIdNew).removeAttr('required', 'required');
                                                                    } else if (value1.Value == 'Required') {
                                                                        $('#' + StateIdNew).css({ 'text-decoration': 'line-through' });
                                                                        $('#' + StateIdNew).removeAttr('readonly');
                                                                        $('#' + StateIdNew).removeAttr('disabled');
                                                                        $('.cl-' + value1.Element.ElId).css({ 'display': 'block' });
                                                                        $('#' + StateIdNew).attr('required', 'required');
                                                                    } else if (value1.Value == '"Not Rendered') {
                                                                        $('#' + StateIdNew).css({ 'text-decoration': '' });
                                                                        $('#' + StateIdNew).removeAttr('readonly');
                                                                        $('#' + StateIdNew).removeAttr('disabled');
                                                                        $('.cl-' + value1.Element.ElId).css({ 'display': 'block' });
                                                                        $('#' + StateIdNew).removeAttr('required', 'required');
                                                                    }

                                                                });
                                                            }
                                                        }
                                                    });
                                                }
                                            }
                                            if (data.referrallist != null || data.referrallist != "") {
                                                $('#referralList-p').html('No Referral List');
                                            } else {
                                                $('#referralList-p').html(data.referrallist);
                                            }
                                        }
                                    });
                                }
                            }
                            $("#goback").click(function () {
                                var prid = $("#prid").val();
                                var pcId = $("#pcidd").val();
                                var cid = $("#ciid").val();
                                var prId = prid;
                                $.ajax({
                                    url: '/Customer/GoBack',
                                    type: "POST",
                                    crossOrigin: true,
                                    data: { "PrId": prid, "cid": cid, "pcid": pcId },
                                    success: function (data) {
                                        window.location.href = data;
                                    }
                                });
                            })
</script>